<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>聯絡簿系統</title>
  <style>
    body { font-family: "Microsoft JhengHei", sans-serif; margin: 40px; background: #f6f8fa; }
    .box { max-width: 500px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #ccc; }
    input, textarea, button { width: 100%; margin-top: 10px; padding: 10px; font-size: 16px; }
    #output { white-space: pre-wrap; background: #f0f0f0; padding: 15px; margin-top: 20px; border-radius: 8px; }
    .hidden { display: none; }
  </style>
</head>
<body>

  <div id="loginBox" class="box">
    <h2>登入系統</h2>
    <input type="text" id="username" placeholder="帳號">
    <input type="password" id="password" placeholder="密碼">
    <button onclick="login()">登入</button>
  </div>

  <div id="teacherBox" class="box hidden">
    <h2>👩‍🏫 教師端</h2>
    <p>歡迎，<span id="teacherName"></span> 老師</p>
    <textarea id="teacherNote" rows="5" placeholder="請輸入聯絡簿內容..."></textarea>
    <button onclick="saveNote()">儲存聯絡簿</button>
    <button onclick="logout()">登出</button>
  </div>

  <div id="studentBox" class="box hidden">
    <h2>👨‍🎓 學生端</h2>
    <p>歡迎，<span id="studentName"></span> 同學</p>
    <div id="noteDisplay">尚無聯絡簿內容</div>
    <button onclick="logout()">登出</button>
  </div>

  <script>
    // 模擬帳號資料（可改成你自己的）
    const accounts = [
      { username: "teacher1", password: "1234", role: "teacher", name: "王小明" },
      { username: "student1", password: "5678", role: "student", name: "李小華" }
    ];

    let currentUser = null;
    let contactBookContent = "";  // 暫存在前端

    function login(){
      const u = document.getElementById('username').value;
      const p = document.getElementById('password').value;

      const user = accounts.find(a => a.username === u && a.password === p);
      if(!user){
        alert("帳號或密碼錯誤！");
        return;
      }

      currentUser = user;
      document.getElementById('loginBox').classList.add('hidden');

      if(user.role === "teacher"){
        document.getElementById('teacherBox').classList.remove('hidden');
        document.getElementById('teacherName').innerText = user.name;
      }else{
        document.getElementById('studentBox').classList.remove('hidden');
        document.getElementById('studentName').innerText = user.name;
        updateStudentView();
      }
    }

    function saveNote(){
      contactBookContent = document.getElementById('teacherNote').value;
      alert("✅ 聯絡簿已儲存！");
    }

    function updateStudentView(){
      const note = contactBookContent || "尚無聯絡簿內容";
      document.getElementById('noteDisplay').innerText = note;
    }

    function logout(){
      currentUser = null;
      document.getElementById('teacherBox').classList.add('hidden');
      document.getElementById('studentBox').classList.add('hidden');
      document.getElementById('loginBox').classList.remove('hidden');
    }
  </script>
</body>
</html>
